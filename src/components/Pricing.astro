---
import Section from "./Section.astro";
import { Icon } from "astro-icon/components";

const plans = [
  {
    name: "Landing page",
    price: "399",
    currency: "USD",
    description:
      "La mejor opción para uso personal y para tu próximo proyecto.",
    features: [
      "Configuracion individual",
      "Sin tarifas ni configuración ocultas",
      "Tamaño de equipo: 1 desarrollador",
      "Soporte premium: 1 mes",
    ],
  },
  {
    name: "E-commerce o Tienda Online",
    price: "1099",
    currency: "USD",
    description:
      "Relevante para múltiples usuarios, soporte extendido y premium.",
    features: [
      "Configuracion individual",
      "Sin tarifas ni configuración ocultas",
      "Tamaño de equipo: 4 desarrolladores",
      "Soporte premium: 2 mes",
    ],
  },
  {
    name: "Enterprise",
    price: "1199",
    currency: "USD",
    description:
      "La mejor opción para crear ese proyecto único que tienes en mente.",
    features: [
      "Configuracion individual",
      "Sin tarifas ni configuración ocultas",
      "Tamaño del equipo: 4 desarroladores",
      "Soporte premium: 3 meses",
    ],
  },
];
---

<script>
  function sendMessageWhatsapp(planInfo: any) {
    // Si se cambia algo en la estructura de esta funcion hay que recordar que se tiene que cambiar la información de contacto por correo
    const numeroWhatsApp = "573184281039";
    let textValuation = `Buenos días/tardes, me interesa trabajar con ustedes en la realización de una pagina web bajo el plan de *${planInfo.name}*.`;

    let url = `https://api.whatsapp.com/send?phone=${numeroWhatsApp}&text=${textValuation}`;
    window.open(url);
  }

  const btns = document.querySelectorAll("#btnWhatsapp");
  btns.forEach((btn) => {
    btn.addEventListener("click", (e) => {
      const {
        dataset: { title },
      } = e.target as any;
      sendMessageWhatsapp({ name: title });
    });
  });
</script>

<Section id="pricing">
  <section>
    <div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6">
      <div class="mx-auto max-w-screen-md text-center mb-8 lg:mb-12 grid gap-4">
        <h4 class="tracking-tight font-semibold text-primary">Tienda</h4>
        <h3 class="text-4xl tracking-tight font-bold dark:text-white">
          Planes a un ☝️ solo pago
        </h3>
        <p class="text-slate-500 max-w-[600px] mx-auto text-balance text-lg">
          Aquí en CodeVista nos enfocamos en mercados donde la tecnología, la
          innovación y el capital pueden desbloquear valor a largo plazo y
          impulsar el crecimiento económico.
        </p>
        <p class="tracking-tight font-semibold text-primary text-xl">
          Precios desde
        </p>
        <p class="text-slate-500 max-w-[600px] mx-auto text-balance text-sm">
          Los precios pueden estar sujetos a cambios segun la cantidad de
          funcionalidades.
        </p>
      </div>
      <div
        class="space-y-8 lg:grid lg:grid-cols-3 sm:gap-6 xl:gap-10 lg:space-y-0"
      >
        <!-- Pricing Card -->
        {
          plans.map(({ name, price, currency, description, features }) => (
          <div
          class="flex flex-col p-6 px-12 mx-auto max-w-lg text-center text-gray-900 rounded-lg xl:p-8 shadow-none hover:shadow-lg transition-shadow relative group xl:px-10 dark:bg-primary/10 dark:hover:shadow-primary/20"
        >
          <Icon
            class="absolute bottom-1 right-0 text-transparent group-hover:text-primary transition-colors"
            name="points"
            size={35}
          />
          <Icon
            class="absolute top-1 left-0 text-transparent group-hover:text-primary transition-colors"
            name="points"
            size={35}
          />
          <h3 class="mb-4 text-2xl font-bold dark:text-white">{name}</h3>
          <p class="text-slate-500 text-sm">
            {description}
          </p>
          <div class="flex justify-center items-baseline my-8">
            <span class="mr-2 text-3xl font-extrabold text-primary"
              >${price} {currency}</span>
          </div>
          <!-- List -->
          <ul role="list" class="mb-8 space-y-4 text-left">
            {
              features.map((feature) => (
              <li class="flex items-center space-x-3 dark:text-white">
                <!-- Icon -->
                <svg
                  class="flex-shrink-0 w-5 h-5 text-green-500"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                  ><path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"></path></svg>
                <span>{feature}</span>
              </li>
              ))
            }
          </ul>
          <button
            id="btnWhatsapp"
            data-title="Landing page"
            class="bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:ring-primary-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center border border-primary hover:bg-primary transition-colors hover:text-white text-primary"
            >¡Comienza ahora!</button>
        </div>
        ))}
      </div>
    </div>
  </section>
</Section>
